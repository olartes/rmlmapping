@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix ql: <http://semweb.mmlab.be/ns/ql#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix schema: <http://schema.org/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#>.
@prefix mtcfg: <http://www.example.com/>.
@base <http://www.example.com/>.

# https://www.cidoc-crm.org/
# https://schema.org/
# http://purl.org/vocab/
# http://vocab.org

# ############################################################################ #
#                             Category
# ############################################################################ #

<#CategoryMapping> a rr:TriplesMap;
  rml:logicalSource [
    rml:source "__CLASSES_CSV__";
    rml:referenceFormulation ql:CSV
  ];

  rr:subjectMap [
    rr:template "http://www.example.com/category/{CLASSID}";
    rr:class mtcfg:MachineTool;
  ];

  rr:predicateObjectMap [
    rr:predicate dcterms:identifier;
    rr:objectMap [
      rml:reference "CLASSID";
      rr:datatype xsd:string
    ]
  ];

  # https://sites.psu.edu/symbolcodes/web/langtag/
  rr:predicateObjectMap [
    rr:predicate rdfs:label;
    rr:objectMap [
      rml:reference "NAME"; #TODO change in NAME_IT
      rr:language "it-IT";
    ];
  ];
  # TODO map english name




  rr:predicateObjectMap [
    rr:predicate skos:topConceptOf;
    rr:objectMap [
      rr:parentTriplesMap <#MachineToolMapping>;
      rr:joinCondition [
        rr:child "CLASSID";
        rr:parent "CEL_INVENTCLASSAID1";
      ];
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate skos:topConceptOf;
    rr:objectMap [
      rr:parentTriplesMap <#ComponentMapping>;
      rr:joinCondition [
        rr:child "CLASSID";
        rr:parent "CEL_INVENTCLASSAID2";
      ];
    ]
  ];

.

# /Category

# ############################################################################ #
#                             MachineTool
# ############################################################################ #

<#MachineToolMapping> a rr:TriplesMap;
  rml:logicalSource [
    rml:source "__MTOOLS_SOURCE__";
    rml:referenceFormulation ql:CSV
  ];

  rr:subjectMap [
    rr:template "http://www.example.com/MachineTool/{CID1}";
    rr:class mtcfg:MachineTool;
  ];

  rr:predicateObjectMap [
    rr:predicate dcterms:identifier;
    rr:objectMap [
      rml:reference "CID1";
      rr:datatype xsd:string
    ]
  ];

  # https://sites.psu.edu/symbolcodes/web/langtag/
  rr:predicateObjectMap [
    rr:predicate rdfs:label;
    rr:objectMap [
      rml:reference "itm_name1"; #TODO change in itm1_name_it
      rr:language "it-IT";
    ];
  ];
  # rr:predicateObjectMap [
  #   rr:predicate rdfs:label;
  #   rr:objectMap [
  #     rml:reference "itm1_name_en";
  #     rr:language "en-US";
  #   ];
  # ];

  # TODO map the description

  # TODO map the price

  rr:predicateObjectMap [
    rr:predicate skos:hasTopConcept;
    rr:objectMap [
      rr:parentTriplesMap <#CategoryMapping>;
      rr:joinCondition [
        rr:child "CEL_INVENTCLASSAID1";
        rr:parent "CLASSID";
      ];
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate skos:member;
    rr:objectMap [
      rr:parentTriplesMap <#ComponentOfMachineToolMapping>;
      rr:joinCondition [
        rr:child "CID2";
        rr:parent "CID2";
      ];
    ]
  ];

.

# /MachineTool

# ############################################################################ #
#                             MachineToolToComponent
# ############################################################################ #

<#ComponentOfMachineToolMapping> a rr:TriplesMap;
  rml:logicalSource [
    rml:source "__MTOOLS_SOURCE__";
    rml:referenceFormulation ql:CSV
  ];

  rr:subjectMap [
    rr:template "http://www.example.com/Component/{CID2}";
    rr:class mtcfg:Component;
  ];

  rr:predicateObjectMap [
    rr:predicate skos:member;
    rr:objectMap [
      rr:parentTriplesMap <#ComponentOfComponentMapping>;
      rr:joinCondition [
        rr:child "CID2";
        rr:parent "CID1";
      ];
    ]
  ];

.

# /MachineToolToComponent

# ############################################################################ #
#                             ComponentOfComponent
# ############################################################################ #

<#ComponentOfComponentMapping> a rr:TriplesMap;
  rml:logicalSource [
    rml:source "__COMPONENT_SOURCE__";
    rml:referenceFormulation ql:CSV
  ];

  rr:subjectMap [
    rr:template "http://www.example.com/Component/{CID1}";
    rr:class mtcfg:Component;
  ];

  rr:predicateObjectMap [
    rr:predicate skos:member;
    rr:objectMap [
      rr:parentTriplesMap <#ComponentMapping>;
      rr:joinCondition [
        rr:child "CID2";
        rr:parent "CID2";
      ];
    ]
  ];

.

# /ComponentToComponent

# ############################################################################ #
#                             Component
# ############################################################################ #

<#ComponentMapping> a rr:TriplesMap;
  rml:logicalSource [
    rml:source "__COMPONENT_SOURCE__";
    rml:referenceFormulation ql:CSV
  ];

  rr:subjectMap [
    rr:template "http://www.example.com/Component/{CID2}";
    rr:class mtcfg:Component;
  ];

  rr:predicateObjectMap [
    rr:predicate dcterms:identifier;
    rr:objectMap [
      rml:reference "CID2";
      rr:datatype xsd:string
    ]
  ];

  # https://sites.psu.edu/symbolcodes/web/langtag/
  rr:predicateObjectMap [
    rr:predicate rdfs:label;
    rr:objectMap [
      rml:reference "itm_name2"; #TODO change in itm2_name_it
      rr:language "it-IT";
    ];
  ];
  # rr:predicateObjectMap [
  #   rr:predicate rdfs:label;
  #   rr:objectMap [
  #     rml:reference "itm2_name_en";
  #     rr:language "en-US";
  #   ];
  # ];

  # TODO map the description

  # TODO map the price

  rr:predicateObjectMap [
    rr:predicate skos:hasTopConcept;
    rr:objectMap [
      rr:parentTriplesMap <#CategoryMapping>;
      rr:joinCondition [
        rr:child "CEL_INVENTCLASSAID2";
        rr:parent "CLASSID";
      ];
    ]
  ];

.

# /Component

